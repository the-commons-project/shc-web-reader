name: 'Setup'
on:
  push:
    tags:
      - v*

jobs:
  deploy-dev:
    if: contains(github.ref, 'dev')
    name: 'Call dev deployment workflow'
    uses: ./.github/workflows/deploy.yml
    with:
      aws-region: us-east-1
      s3-bucket-name: ips-viewer-app
      aws-assume-role: ${{ secrets.GH_AWS_SERVICE_ROLE_DEV }}
  deploy-prod:
    if: contains(github.ref, 'prod')
    name: 'Call dev deployment workflow'
    uses: ./.github/workflows/deploy.yml
    with:
      aws-region: us-east-1
      s3-bucket-name: ips-viewer-app
      aws-assume-role: ${{ secrets.GH_AWS_SERVICE_ROLE_PROD }}